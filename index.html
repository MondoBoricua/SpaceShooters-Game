<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Space Shooter Arcade Game</title>
        <!-- Inline CSS -->
        <style>
            body {
                margin: 0;
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                background-color: #2b2828;
            } 

            canvas {
                border: 1px solid black;
            }
        </style>
    </head>
    <body>
        <canvas id="gameCanvas" width="800" height="600"></canvas>

        <!-- JavaScript code goes here -->  
        <script>
            const canvas = document.getElementById("gameCanvas");
            const ctx = canvas.getContext("2d");

            let score = 0;
            let enemies = [];
            let player;
            let bullets = [];

            class Player {
                constructor() {
                    this.width = 50;
                    this.height = 50;
                    this.x = canvas.width / 2 - this.width / 2;
                    this.y = canvas.height - this.height - 10;
                    this.speed = 30;
                    this.lives = 3;
                }

                draw() {
                    ctx.fillStyle = "#00ff00";
                    ctx.beginPath();
                    ctx.moveTo(this.x + this.width / 2, this.y);
                    ctx.lineTo(this.x + this.width, this.y + this.height);
                    ctx.lineTo(this.x, this.y + this.height);
                    ctx.closePath();
                    ctx.fill();
                }
            }
 
            class Enemy {
                constructor() {
                    this.width = 40;
                    this.height = 40;
                    this.x = Math.random() * (canvas.width - this.width);
                    this.y = Math.random() * -100;
                    this.speed = 2 + Math.random() * 2;
                    this.movementAngle = 0;
                }

                update() {
                    this.y += this.speed;
                    this.x += Math.sin(this.movementAngle) * 2;
                    this.movementAngle += 0.05;
                }

                draw() {
                    ctx.fillStyle = "#ff4444";
                    ctx.beginPath();
                    ctx.moveTo(this.x + this.width / 2, this.y + this.height);
                    ctx.lineTo(this.x + this.width, this.y);
                    ctx.lineTo(this.x, this.y);
                    ctx.closePath();
                    ctx.fill();
                }
            }

            class Bullet {
                constructor(x, y) {
                    this.width = 4;
                    this.height = 15;
                    this.x = x + (player.width / 2) - (this.width / 2);
                    this.y = y;
                    this.speed = 10;
                }

                update() {
                    this.y -= this.speed;
                }

                draw() {
                    ctx.fillStyle = "#ffff00";
                    ctx.fillRect(this.x, this.y, this.width, this.height);
                }
            }

            let gameOver = false;
            let lastShot = 0;
            const shootCooldown = 250; // milliseconds between shots

            function setup() {
                player = new Player();
                enemies = [];
                bullets = [];
                score = 0;
                gameOver = false;
                spawnEnemies();
            }

            function spawnEnemies() {
                if (enemies.length < 5) {
                    const enemiesNeeded = 5 - enemies.length;
                    for (let i = 0; i < enemiesNeeded; i++) {
                        enemies.push(new Enemy());
                    }
                }
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Draw stars in background
                ctx.fillStyle = "white";
                for (let i = 0; i < 50; i++) {
                    ctx.fillRect(
                        Math.random() * canvas.width,
                        Math.random() * canvas.height,
                        2,
                        2
                    );
                }

                if (!gameOver) {
                    player.draw();
                    for (let enemy of enemies) {
                        enemy.draw();
                    }
                    for (let bullet of bullets) {
                        bullet.draw();
                    }
                }

                // Draw HUD
                ctx.fillStyle = "white";
                ctx.font = "20px Arial";
                ctx.fillText("Score: " + score, 10, 30);
                ctx.fillText("Lives: " + player.lives, 10, 60);

                if (gameOver) {
                    ctx.fillStyle = "white";
                    ctx.font = "48px Arial";
                    ctx.textAlign = "center";
                    ctx.fillText("GAME OVER", canvas.width / 2, canvas.height / 2);
                    ctx.font = "24px Arial";
                    ctx.fillText("Press ENTER to restart", canvas.width / 2, canvas.height / 2 + 40);
                    ctx.textAlign = "left";
                }
            }

            function update() {
                if (!gameOver) {
                    // Update enemies
                    for (let i = enemies.length - 1; i >= 0; i--) {
                        const enemy = enemies[i];
                        enemy.update();

                        // Check if enemy is off screen
                        if (enemy.y > canvas.height) {
                            enemies.splice(i, 1);
                            player.lives--;
                            if (player.lives <= 0) {
                                gameOver = true;
                            }
                        }

                        // Check for collision with player
                        if (enemy.x < player.x + player.width &&
                            enemy.x + enemy.width > player.x &&
                            enemy.y < player.y + player.height &&
                            enemy.y + enemy.height > player.y) {
                            enemies.splice(i, 1);
                            player.lives--;
                            if (player.lives <= 0) {
                                gameOver = true;
                            }
                        }

                        // Check for collision with bullets
                        for (let j = bullets.length - 1; j >= 0; j--) {
                            const bullet = bullets[j];
                            if (bullet.x < enemy.x + enemy.width &&
                                bullet.x + bullet.width > enemy.x &&
                                bullet.y < enemy.y + enemy.height &&
                                bullet.y + bullet.height > enemy.y) {
                                enemies.splice(i, 1);
                                bullets.splice(j, 1);
                                score += 10;
                                break;
                            }
                        }
                    }

                    // Update bullets
                    for (let i = bullets.length - 1; i >= 0; i--) {
                        bullets[i].update();
                        if (bullets[i].y < 0) {
                            bullets.splice(i, 1);
                        }
                    }

                    spawnEnemies();
                }

                draw();
                requestAnimationFrame(update);
            }

            function handleInput(event) {
                if (gameOver && event.key === "Enter") {
                    setup();
                    return;
                }

                if (!gameOver) {
                    switch (event.key) {
                        case "ArrowUp":
                            player.y = Math.max(0, player.y - player.speed);
                            break;
                        case "ArrowDown":
                            player.y = Math.min(canvas.height - player.height, player.y + player.speed);
                            break;
                        case "ArrowLeft":
                            player.x = Math.max(0, player.x - player.speed);
                            break;
                        case "ArrowRight":
                            player.x = Math.min(canvas.width - player.width, player.x + player.speed);
                            break;
                        case " ":
                            const now = Date.now();
                            if (now - lastShot >= shootCooldown) {
                                bullets.push(new Bullet(player.x, player.y));
                                lastShot = now;
                            }
                            break;
                    }
                }
            }

            setup();
            update();

            window.addEventListener("keydown", handleInput);
        </script>
    </body>
</html>
